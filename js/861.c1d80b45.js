"use strict";(self["webpackChunkvue_router"]=self["webpackChunkvue_router"]||[]).push([[861],{2861:function(t,e,a){a.r(e),a.d(e,{default:function(){return Z}});var l=a(6252),n=a(3577),s=a(9963);const i={class:"container"},d=(0,l._)("h2",{class:"mt-5"},"購物車頁面",-1),o={class:"mt-4"},r={class:"table align-middle"},u=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"圖片"),(0,l._)("th",null,"商品名稱"),(0,l._)("th",null,"價格"),(0,l._)("th")])],-1),c={style:{width:"200px"}},p={key:0,class:"h5"},_={key:1},h={class:"h6"},b={class:"h5"},g={class:"btn-group btn-group-sm"},m=(0,l._)("button",{type:"button",class:"btn btn-outline-secondary"}," 查看更多 ",-1),v=["onClick","disabled"],w={class:"spinner-border spinner-border-sm"},y=(0,l.Uk)(" 加到購物車 "),k={class:"text-end"},C=["disabled"],D={class:"table align-middle"},x=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th"),(0,l._)("th",null,"品名"),(0,l._)("th",{style:{width:"150px"}},"數量/單位"),(0,l._)("th",null,"單價")])],-1),z=["onClick","disabled"],I={class:"input-group input-group-sm"},f={class:"input-group mb-3"},L=["onChange","onUpdate:modelValue","disabled"],$=["value"],q={class:"input-group-text",id:"basic-addon2"},U={class:"text-end"},H=(0,l._)("td",{colspan:"3",class:"text-end"},"總計",-1),K={class:"text-end"};function Y(t,e,a,Y,A,P){return(0,l.wg)(),(0,l.iD)("div",i,[d,(0,l._)("div",o,[(0,l._)("table",r,[u,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(A.products,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",c,[(0,l._)("div",{style:(0,n.j5)([{backgroundImage:`url(${t.imageUrl})`},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),(0,l._)("td",null,(0,n.zw)(t.title),1),(0,l._)("td",null,[t.price===t.origin_price?((0,l.wg)(),(0,l.iD)("div",p,(0,n.zw)(t.price)+" 元 ",1)):((0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("del",h,"原價 "+(0,n.zw)(t.origin_price)+" 元",1),(0,l._)("div",b,"現在只要 "+(0,n.zw)(t.price)+" 元",1)]))]),(0,l._)("td",null,[(0,l._)("div",g,[m,(0,l._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e=>P.addToCart(t.id),disabled:A.isLoadingItem===t.id},[(0,l.wy)((0,l._)("span",w,null,512),[[s.F8,A.isLoadingItem===t.id]]),y],8,v)])])])))),128))])]),(0,l._)("div",k,[(0,l._)("button",{class:"btn btn-outline-danger",type:"button",onClick:e[0]||(e[0]=(...e)=>t.removeCartAll&&t.removeCartAll(...e)),disabled:0===A.cartData.carts.length}," 清空購物車 ",8,C)]),(0,l._)("table",D,[x,(0,l._)("tbody",null,[A.cartData.carts?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:0},(0,l.Ko)(A.cartData.carts,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",null,[(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>t.removeCartItem(e.id),disabled:A.isLoadingItem===e.id}," x ",8,z)]),(0,l._)("td",null,(0,n.zw)(e.product.title),1),(0,l._)("td",null,[(0,l._)("div",I,[(0,l._)("div",f,[(0,l.wy)((0,l._)("select",{class:"form-select",onChange:a=>t.updateCartItem(e),"onUpdate:modelValue":t=>e.qty=t,disabled:A.isLoadingItem===e.id},[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(20,(t=>(0,l._)("option",{value:t,key:`${t}+${e.id}`},(0,n.zw)(t),9,$))),64))],40,L),[[s.bM,e.qty]]),(0,l._)("span",q,(0,n.zw)(e.product.unit),1)])])]),(0,l._)("td",U,(0,n.zw)(e.product.price),1)])))),128)):(0,l.kq)("",!0)]),(0,l._)("tfoot",null,[(0,l._)("tr",null,[H,(0,l._)("td",K,(0,n.zw)(A.cartData.total),1)])])])])])}var A=a(4902),P={data(){return{products:[],cartData:{carts:[]},isLoadingItem:""}},methods:{getProduct(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/hsiaoi/products/all").then((t=>{this.products=t.data.products})).catch((t=>{alert(t.data.message)}))},addToCart(t,e=1){const a={product_id:t,qty:e};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/hsiaoi/cart",{data:a}).then((t=>{console.log(t)})).catch((t=>{alert(t.data.message)}))}},mounted(){this.getProduct(),A.Z.emit("get-cart")}},T=a(3744);const V=(0,T.Z)(P,[["render",Y]]);var Z=V}}]);
//# sourceMappingURL=861.c1d80b45.js.map
{"version":3,"file":"js/861.c1d80b45.js","mappings":"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","sources":["webpack://vue-router/./src/views/CartView.vue","webpack://vue-router/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h2 class=\"mt-5\">購物車頁面</h2>\n    <div class=\"mt-4\">\n      <!-- 產品Modal -->\n      <!-- <product-modal\n        ref=\"productModal\"\n        :id=\"productId\"\n        @add-cart=\"addToCart\"\n      ></product-modal> -->\n      <!-- 產品Modal -->\n\n      <table class=\"table align-middle\">\n        <thead>\n          <tr>\n            <th>圖片</th>\n            <th>商品名稱</th>\n            <th>價格</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"product in products\" :key=\"product.id\">\n            <td style=\"width: 200px\">\n              <div\n                :style=\"{ backgroundImage: `url(${product.imageUrl})` }\"\n                style=\"\n                  height: 100px;\n                  background-size: cover;\n                  background-position: center;\n                \"\n              ></div>\n            </td>\n            <td>{{ product.title }}</td>\n            <td>\n              <div class=\"h5\" v-if=\"product.price === product.origin_price\">\n                {{ product.price }} 元\n              </div>\n              <div v-else>\n                <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\n                <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n              </div>\n            </td>\n            <td>\n              <div class=\"btn-group btn-group-sm\">\n                <button type=\"button\" class=\"btn btn-outline-secondary\">\n                  <!-- <i class=\"fas fa-spinner fa-pulse\"></i> -->\n                  查看更多\n                </button>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-danger\"\n                  @click=\"addToCart(product.id)\"\n                  :disabled=\"isLoadingItem === product.id\"\n                >\n                  <span\n                    class=\"spinner-border spinner-border-sm\"\n                    v-show=\"isLoadingItem === product.id\"\n                  ></span>\n                  <!-- <i class=\"fas fa-spinner fa-pulse\"></i> -->\n                  加到購物車\n                </button>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <!-- 購物車列表 -->\n      <div class=\"text-end\">\n        <button\n          class=\"btn btn-outline-danger\"\n          type=\"button\"\n          @click=\"removeCartAll\"\n          :disabled=\"cartData.carts.length === 0\"\n        >\n          清空購物車\n        </button>\n      </div>\n      <table class=\"table align-middle\">\n        <thead>\n          <tr>\n            <th></th>\n            <th>品名</th>\n            <th style=\"width: 150px\">數量/單位</th>\n            <th>單價</th>\n          </tr>\n        </thead>\n        <tbody>\n          <template v-if=\"cartData.carts\">\n            <tr v-for=\"cart in cartData.carts\" :key=\"cart.id\">\n              <td>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-danger btn-sm\"\n                  @click=\"removeCartItem(cart.id)\"\n                  :disabled=\"isLoadingItem === cart.id\"\n                >\n                  <!-- <i class=\"fas fa-spinner fa-pulse\"></i> -->\n                  x\n                </button>\n              </td>\n              <td>\n                {{ cart.product.title }}\n                <!-- <div class=\"text-success\">已套用優惠券</div> -->\n              </td>\n              <td>\n                <div class=\"input-group input-group-sm\">\n                  <div class=\"input-group mb-3\">\n                    <!-- <input min=\"1\" type=\"number\" class=\"form-control\" /> -->\n                    <select\n                      class=\"form-select\"\n                      @change=\"updateCartItem(cart)\"\n                      v-model=\"cart.qty\"\n                      :disabled=\"isLoadingItem === cart.id\"\n                    >\n                      <option\n                        :value=\"num\"\n                        v-for=\"num in 20\"\n                        :key=\"`${num}+${cart.id}`\"\n                      >\n                        {{ num }}\n                      </option>\n                    </select>\n                    <span class=\"input-group-text\" id=\"basic-addon2\">{{\n                      cart.product.unit\n                    }}</span>\n                  </div>\n                </div>\n              </td>\n              <td class=\"text-end\">\n                <!-- <small class=\"text-success\">折扣價：</small> -->\n                {{ cart.product.price }}\n              </td>\n            </tr>\n          </template>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td colspan=\"3\" class=\"text-end\">總計</td>\n            <td class=\"text-end\">{{ cartData.total }}</td>\n          </tr>\n          <!-- <tr>\n                <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n                <td class=\"text-end text-success\">{{ }}</td>\n              </tr> -->\n        </tfoot>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter.js'\n\nexport default {\n  data() {\n    return {\n      products: [],\n      cartData: {\n        carts: []\n      },\n      isLoadingItem: ''\n    }\n  },\n  methods: {\n    getProduct() {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((res) => {\n          // console.log(res);\n          this.products = res.data.products\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    },\n    // 加入購物車\n    addToCart(id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty\n      }\n      this.isLoadingItem = id\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/cart`,\n          { data }\n        )\n        .then((res) => {\n          console.log(res)\n          //   this.getCart()\n          //   this.isLoadingItem = ''\n          //   this.$refs.productModal.closeModal()\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    }\n  },\n  mounted() {\n    this.getProduct()\n    emitter.emit('get-cart')\n  }\n}\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=4836d939\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/luoxiaoyin/Desktop/other/front end/Vue3 課程/homework/第七週作業/dashboard/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","type","id","colspan","_createElementBlock","_hoisted_2","_hoisted_5","_Fragment","_renderList","$data","product","key","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","_hoisted_8","_hoisted_12","onClick","$options","disabled","_ctx","carts","length","_hoisted_17","_hoisted_19","cart","_hoisted_20","onChange","qty","$event","num","value","_hoisted_24","unit","_hoisted_27","total","data","products","cartData","isLoadingItem","methods","getProduct","this","$http","get","then","res","catch","err","alert","message","addToCart","product_id","post","console","log","mounted","emitter","__exports__","render"],"sourceRoot":""}